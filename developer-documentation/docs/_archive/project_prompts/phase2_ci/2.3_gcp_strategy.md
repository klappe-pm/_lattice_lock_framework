# Task 2.3: GCP Cloud Build Strategy Design

**Status:** Approved
**Owner:** Gemini Antimatter
**Implementation Task:** (Devin AI)

---

## 1. Architecture
Mapping to Google Cloud Build:

*   **Source:** Cloud Source Repositories or GitHub Trigger.
*   **Build:** `cloudbuild.yaml` steps.
*   **Artifacts:** Artifact Registry (Docker/Python).

## 2. cloudbuild.yaml Template

```yaml
steps:
  # 1. Install & Validate
  - name: 'python:3.11'
    entrypoint: 'bash'
    args:
      - '-c'
      - |
        pip install .[dev]
        lattice-lock validate
    id: 'validate'

  # 2. Test (Gauntlet)
  - name: 'python:3.11'
    entrypoint: 'bash'
    args:
      - '-c'
      - |
        pip install .[dev]
        lattice-lock test
    id: 'test'
    env:
      - 'GOOGLE_API_KEY=$_GOOGLE_API_KEY'

options:
  logging: CLOUD_LOGGING_ONLY
```

## 3. Service Account
Grant `Vertex AI User` role to the Cloud Build service account to allow Gauntlet to query Gemini models during testing.
