# Task 7.1: Performance Profiling Strategy Design

**Status:** Draft
**Owner:** Gemini Antimatter
**Implementation Task:** 7.2 (Devin AI)

---

## 1. Metrics to Capture
*   **Orchestration Latency:** Time from request to provider prompt.
*   **Provider Latency:** Time waiting for LLM response (TTFT, Total).
*   **Validation Overhead:** Time spent in Sheriff/Sheriff AST checks.

## 2. Profiling Middleware
Inject a profiler into the CLI and API layers using `cProfile` (for local debug) and OpenTelemetry (for production).

```python
# Decorator approach
@profile_performance("orchestrator.generate")
def generate(...): ...
```

## 3. Storage
*   **Local:** `profile.stats` (view with snakeviz).
*   **Production:** Prometheus/Grafana endpoint.

## 4. Goals
*   Orchestrator overhead < 50ms.
*   Validation < 200ms for small projects.
