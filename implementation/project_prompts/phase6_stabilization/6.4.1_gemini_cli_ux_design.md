# Task 6.4.1 - Engineering Framework CLI UX Design

**Tool:** Gemini Antimatter (Design Doc)
**Phase:** 6.4 - Engineering Framework & Tooling
**Dependencies:** None (can run after Phase 6.1/6.2)
**Owner:** Gemini Antimatter

---

## Prompt for Gemini Antimatter

You are helping maintain architectural documentation for the lattice-lock-framework.

Task ID: 6.4.1 - Engineering Framework CLI UX Design

### Context

The framework needs a cohesive CLI experience. Currently:
- `scripts/orchestrator_cli.py` - Model orchestration commands
- `src/lattice_lock_cli/` - Scaffolding CLI (partially implemented)
- No unified `lattice-lock` command

**Desired User Experience:**
```bash
# Initialize a new project
lattice-lock init my-project

# Validate schema and code
lattice-lock validate

# Compile schema to artifacts
lattice-lock compile

# Run Sheriff AST checks
lattice-lock sheriff

# Run Gauntlet semantic tests
lattice-lock gauntlet

# Model orchestration
lattice-lock route "prompt"
lattice-lock analyze "prompt"
```

### Goals

Write a design document covering:

1. **Command Structure**
   Define all commands with:
   - Command name and aliases
   - Description
   - Arguments and options
   - Exit codes
   - Example usage

2. **Core Commands**
   
   **`lattice-lock init [project-name]`**
   - Create new project with scaffolding
   - Options: `--template`, `--ci`, `--no-git`
   - Creates: lattice.yaml, directory structure, CI config
   
   **`lattice-lock validate [path]`**
   - Run all validation (schema + Sheriff + Gauntlet)
   - Options: `--schema-only`, `--sheriff-only`, `--gauntlet-only`
   - Exit codes: 0 success, 1 validation errors, 2 config errors
   
   **`lattice-lock compile [schema-path]`**
   - Compile lattice.yaml to artifacts
   - Options: `--output-dir`, `--pydantic`, `--sqlmodel`, `--gauntlet`
   
   **`lattice-lock sheriff [path]`**
   - Run AST validation
   - Options: `--fix` (auto-fix where possible), `--ignore`
   
   **`lattice-lock gauntlet [path]`**
   - Run semantic contract tests
   - Options: `--verbose`, `--coverage`

3. **Orchestrator Commands**
   
   **`lattice-lock route <prompt>`**
   - Route to optimal model
   - Options: `--strategy`, `--model`, `--task-type`
   
   **`lattice-lock analyze <prompt>`**
   - Analyze task without executing
   
   **`lattice-lock consensus <prompt>`**
   - Multi-model consensus
   - Options: `--num`, `--method`

4. **Output Formatting**
   - Use `rich` for colored output
   - Progress indicators for long operations
   - JSON output option (`--json`)
   - Quiet mode (`--quiet`)

5. **Configuration**
   - Config file location: `.lattice-lock.yaml` or `pyproject.toml`
   - Environment variable overrides
   - Default values

6. **Error Handling**
   - Consistent error message format
   - Actionable remediation hints
   - Debug mode (`--debug`)

7. **Tool Ownership Alignment**
   - Which commands Devin AI implements
   - Which commands Claude Code CLI implements
   - Integration points

8. **Implementation Tasks**
   List concrete tasks for Devin AI:
   - Files to create/modify
   - Commands to implement
   - Tests to write

### Reference Files

- `src/lattice_lock_cli/` - Existing CLI structure
- `scripts/orchestrator_cli.py` - Orchestrator commands
- Tool ownership matrix in `work_breakdown_structure.md`
