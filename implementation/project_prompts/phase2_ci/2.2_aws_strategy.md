# Task 2.2: AWS CodePipeline Strategy Design

**Status:** Approved
**Owner:** Gemini Antimatter
**Implementation Task:** (Devin AI)

---

## 1. Architecture
We map the standard CI stages to AWS Services:

*   **Source:** CodeCommit or GitHub Connection.
*   **Build:** AWS CodeBuild (runs `lattice-lock validate` & `test`).
*   **Artifacts:** S3 (stores reports).
*   **Deploy:** CodeDeploy (Lambda/ECS).

## 2. buildspec.yaml Template

```yaml
version: 0.2

phases:
  install:
    commands:
      - pip install .[dev]
      - pip install awscli
  
  pre_build:
    commands:
      # Governance Check
      - lattice-lock validate
      
  build:
    commands:
      # Semantic Tests (Gauntlet)
      # Assume Bedrock access via IAM role
      - lattice-lock test --report-format=junit
      
  post_build:
    commands:
      - echo Build completed on `date`
```

## 3. IAM Permissions
The CodeBuild role requires:
*   `bedrock:InvokeModel` (for Gauntlet tests).
*   `s3:PutObject` (for artifacts).
